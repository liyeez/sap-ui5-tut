const cds = require('../../cds')
const _transform = o => ({ subdomain: o.subscribedSubdomain, tenant: o.subscribedTenantId })

const getTenantInfo = async tenant => {
  const provisioning = await cds.connect.to('ProvisioningService')
  return tenant
    ? _transform(await provisioning.get(`tenant`, { ID: tenant }))
    : (await provisioning.read('tenant')).map(o => _transform(o))
}

module.exports = getTenantInfo
